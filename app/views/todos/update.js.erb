$('turbolinks:load').ready(function() {
  <% if @todo.errors.any? %>
    const title = "<%= todo_title_modal(:edit) %>";
    const form = "<%= j todo_partials 'form', locals: { todo: @todo } %>";
  
    App.Todo.edit(title, form);

    const render = "<%= j todo_partials 'errors', locals: { todo: @todo } %>"; 
    const errors = "<%= @todo.errors.keys.map(&:to_s) %>";

    App.Todo.renderErrors(render, errors);
  <% else %>
    const id = "<%= @todo.id %>";
    const title = "<%= translate_model(Todo) %>";
    const message = "<%= t('messages.todo.updated') %>";
    const todo = "<%= j todo_partials 'todo', locals: { todo: @todo } %>";
    App.Toast.add(title, message);
    App.Todo.update(Number(id), todo);
  <% end %>
});

